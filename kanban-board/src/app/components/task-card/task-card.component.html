<div 
  class="cursor-grab active:cursor-grabbing"
  draggable="true"
  (dragstart)="dragStart(task, $event)"
  (dragend)="dragEnd($event)"
>
  <ion-card class="shadow-md rounded-xl border border-gray-200">

    <!-- HEADER -->
    <ion-card-header class="p-4">

      <div class="flex justify-between items-start">

        <!-- T√çTULO E PRIORIDADE -->
        <div>
          <ion-card-title class="text-lg font-semibold text-gray-800">
            {{ task.title }}
          </ion-card-title>

          <!-- BADGE DE PRIORIDADE -->
          <span
            class="inline-block mt-2 px-3 py-1 rounded-full text-xs font-semibold"
            [ngClass]="{
              'bg-green-100 text-green-700': task.priority === 'baixa',
              'bg-yellow-100 text-yellow-700': task.priority === 'media',
              'bg-red-100 text-red-700': task.priority === 'alta'
            }"
          >
            ‚óè {{
              task.priority === 'baixa'
                ? 'Baixa'
                : task.priority === 'media'
                  ? 'M√©dia'
                  : 'Alta'
            }}
          </span>
        </div>

        <!-- BOT√ÉO EDITAR NO TOPO DIREITO -->
        <button 
          class="text-blue-600 hover:text-blue-800 transition ml-2"
          (click)="edit.emit(task)"
        >
          <ion-icon name="create-outline" class="text-xl"></ion-icon>
        </button>

      </div>
    </ion-card-header>

    <!-- CONTE√öDO -->
    <ion-card-content class="px-4 pb-4 text-gray-700">
      <p>{{ task.description }}</p>

      @if (task.dueDate) {
        <p class="mt-2 text-sm text-gray-500">
          üìÖ {{ task.dueDate | date:'shortDate' }}
        </p>
      }
    </ion-card-content>

  </ion-card>
</div>
